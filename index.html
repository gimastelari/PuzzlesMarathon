<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Puzzles Marathon — Danbury, CT</title>
  <meta name="description" content="Puzzles Marathon — April 25, 10am–2pm at 36 E Hayestown Rd, Danbury, CT." />
  <link rel="icon" href="assets/img/logo-heart.jpg" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .glass { backdrop-filter: blur(10px); background: rgba(255,255,255,.9); }
  </style>
</head>

<body class="bg-slate-50 text-slate-900">

<!-- NAV -->
<header class="sticky top-0 z-40 bg-white/90 border-b border-slate-200">
  <nav class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
    <a href="#" class="flex items-center gap-2 font-semibold text-xl">
      <img src="assets/img/logo-heart.jpg" class="w-8 h-8 rounded-full" />
      Puzzles Marathon
    </a>
    <ul class="hidden md:flex gap-6 text-sm font-medium">
      <li><a href="#about">About</a></li>
      <li><a href="#event">Event</a></li>
      <li><a href="#community">Community</a></li>
      <li><a href="#accessibility">Accessibility</a></li>
      <li><a href="#forms">Register</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
    <a href="#forms" class="hidden md:inline-block bg-blue-600 text-white px-4 py-2 rounded-lg">
      Register
    </a>
  </nav>
</header>

<!-- HERO -->
<section class="max-w-6xl mx-auto px-4 py-16 grid md:grid-cols-2 gap-10">
  <div class="glass p-8 rounded-2xl shadow">
    <h1 class="text-4xl font-bold">Run for Awareness. Celebrate Community.</h1>
    <p class="mt-4">April 25 · 36 E Hayestown Rd, Danbury, CT</p>
    <a href="#forms" class="inline-block mt-6 bg-blue-600 text-white px-6 py-3 rounded-xl">
      Register Now
    </a>
  </div>
  <img src="assets/img/logo-heart.jpg" class="w-72 h-72 mx-auto rounded-full shadow" />
</section>

<!-- ABOUT -->
<section id="about" class="max-w-6xl mx-auto px-4 py-16">
  <h2 class="text-3xl font-bold">About the Marathon</h2>
  <p class="mt-4 text-slate-700">
    Puzzles Marathon is an inclusive, city-backed community run supporting the autism community
    through awareness, accessibility, and connection. Our mission is to bring people together in 
    a safe and inclusive space and support the autistim community. Puzzles 5K promotes understanding,
    acceptance, and joy through movement and connection. This event is not designed to meet individual
    needs, but to inspire and advocate others about the unique strengths and contributions of people 
    with autism to our world. 
  </p>
</section>

<!-- EVENT -->
<section id="event" class="bg-white border-y">
  <div class="max-w-6xl mx-auto px-4 py-16">
    <h2 class="text-3xl font-bold">Event Details</h2>
    <ul class="mt-4 space-y-2 text-slate-700">
      <li><strong>Date:</strong> April 25, 10:00 AM – 2:00 PM</li>
      <li><strong>Location:</strong> 36 E Hayestown Rd, Danbury, CT</li>
      <li><strong>Finish:</strong> 36 E Hayestown Rd, Danbury, CT</li>
      <li><strong>Distances:</strong> 5K </li>
    </ul>
  </div>
</section>

<!-- COMMUNITY -->
<section id="community" class="max-w-6xl mx-auto px-4 py-16">
  <h2 class="text-3xl font-bold">Community Impact</h2>
  <p class="mt-4 text-slate-700">
    The event supports inclusive programming, education, and local organizations serving autistic individuals and families.
  </p>
</section>

<!-- ACCESSIBILITY -->
<section id="accessibility" class="bg-white border-y">
  <div class="max-w-6xl mx-auto px-4 py-16">
    <h2 class="text-3xl font-bold">Accessibility</h2>
    <ul class="mt-4 list-disc list-inside text-slate-700">
      <li>Wheelchair-accessible route</li>
      <li>Sensory-friendly spaces</li>
      <li>Trained volunteers</li>
      <li>Clear signage and wayfinding</li>
    </ul>
  </div>
</section>

<!-- FORMS -->
<section id="forms" class="max-w-6xl mx-auto px-4 py-16 grid md:grid-cols-2 gap-8">

<!-- RUNNERS -->
<div class="bg-white p-6 rounded-xl shadow">
  <h3 class="font-semibold mb-3">Runners</h3>
  <form id="participantForm" class="space-y-3">
    <input required name="name" placeholder="Full Name" class="w-full border px-3 py-2 rounded" />
    <input required name="email" type="email" placeholder="Email" class="w-full border px-3 py-2 rounded" />
    <input required name="phone" placeholder="Phone" class="w-full border px-3 py-2 rounded" />
    <label for="shirtSize">T-Shirt Size *</label>
    <select id="shirtSize" name="shirt_size" required>
      <option value="" disabled selected>Select your size</option>
      <option value="XS">Extra Small</option>
      <option value="S">Small</option>
      <option value="M">Medium</option>
      <option value="L">Large</option>
      <option value="XL">Extra Large</option>
    </select>
    <div class="terms-container">
      <label class="terms-label" flex items-center gap-2>
        <input
          type="checkbox"
          name="agreed_to_terms"
          value="Yes"
          required
        />
        I agree to the
        <a
          href="https://docs.google.com/document/d/1MdWsLI6YuOy6cZM16VV6U5cdBMise8wneQRcEbTANVc/edit?usp=sharing"
          target="_blank"
          rel="noopener noreferrer"
          class="text-blue-600 underline hover:text-blue-800"
        >
          Terms & Conditions and Waiver
        </a>
      </label>
    </div>
    <button
      type="button"
      onclick="startRunnerCheckout()"
      class="bg-blue-600 text-white px-5 py-2 rounded"
    >
      Pay & Submit
    </button>
  </form>
</div>

<!-- SPONSOR -->
<div class="bg-white p-6 rounded-xl shadow">
  <h3 class="font-semibold mb-3">Sponsors</h3>
  <form id="sponsorForm" class="space-y-3">
    <input required name="organization" placeholder="Organization" class="w-full border px-3 py-2 rounded" />
    <input required name="contact" placeholder="Contact Name" class="w-full border px-3 py-2 rounded" />
    <input required name="email" type="email" placeholder="Email" class="w-full border px-3 py-2 rounded" />
    <button
      type="button"
      onclick="startCheckout('sponsor')"
      class="bg-blue-600 text-white px-5 py-2 rounded"
    >
      Pay & Submit
    </button>
  </form>
</div>

<!-- VENDOR  -->
<div class="bg-white p-6 rounded-xl shadow">
  <h3 class="font-semibold mb-3">Vendors</h3>
  <form id='vendorForm' class="space-y-3">
    <input required name="company" placeholder='Company Name' class="w-full border px-3 py-2 rounded" />
    <input required name="contact" placeholder='Contact Name' class="w-full border px-3 py-2 rounded" />
    <input required name="email" type="email" placeholder='Email' class="w-full border px-3 py-2 rounded" />
    <input required name="phone" placeholder='Phone Number' class="w-full border px-3 py-2 rounded" />
    <input required name="vendor_code" placeholder='Vendor Code' class="w-full border px-3 py-2 rounded" />
    <button
      type='button'
      onClick="startVendorCheckout()"
      class="bg-blue-600 text-white px-5 py-2 rounded"
    >
      Pay & Submit
  </button>
  </form>
</div>

</section>

<!-- CONTACT -->
<section id="contact" class="bg-white border-t">
  <div class="max-w-6xl mx-auto px-4 py-12 flex justify-between">
    <p>Questions? <a href="mailto:info@puzzlesmarathon.com" class="text-blue-600 underline">info@puzzlesmarathon.com</a></p>
    <p class="text-sm text-slate-500">© 2025 Puzzles Marathon</p>
  </div>
</section>

<!-- STRIPE BACKEND CHECKOUT -->
<script>
  function startRunnerCheckout() {
    const form = document.getElementById('participantForm');

    // save runner data for FORMSPREE after payment
    localStorage.setItem('participantFormData', JSON.stringify({
      name: form.name.value,
      email: form.email.value,
      phone: form.phone.value,
      shirt_size: form.shirt_size.value,
      agreed_to_terms: form.agreed_to_terms.checked ? "Yes" : "No"
    }));
    startCheckout('runner');
}
</script>
<script>
async function startCheckout(type) {
  const response = await fetch(
    "https://puzzles-marathon-backend.onrender.com/create-session",
    {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ type })
    }
  );

  const data = await response.json();

  if (data.url) {
    window.location.href = data.url;
  } else {
    alert("Payment failed. Please try again.");
  }
}
</script>

<script>
  function startVendorCheckout(){
    const form = document.getElementById('vendorForm');
    const vendorCode = form.vendor_code.value.trim()

    // enforce vendor approval 
    if (vendorCode !== 'VENDOR2026'){
      alert('Invalid Vendor Code. PLease enter the approved code.')
      return;
    }

    // Save vendor form data for Formspree (after payment)
    localStorage.setItem('vendorForm', JSON.stringify({
      company: form.company.value, 
      contact: form.contact.value, 
      email: form.email.value, 
      phone: form.phone.value,
      vendor_code: vendorCode
    }));

    // Reuse the SAME stripe flow 
    startCheckout('vendor');
  }
</script>

</body>
</html>


